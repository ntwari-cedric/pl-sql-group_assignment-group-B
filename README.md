# pl-sql-group_assignment-group-B

## PHS2 â€“ PL/SQL Assignment  

---

## ðŸ‘¥ Group Members

1. **Ntambara Shema Chrispin** â€“ 28280  
2. **Munyanturire Kaliza Liesse** â€“ 28410  
3. **Himba Aimee Mireille** â€“ 28220  
4. **Ntwari Cedric** â€“ 28228  
5. **Singizwa Boncoeur** â€“ 28228  
6. **Irembere Olivier** â€“ 28392  
7. **Uwase Sonia Umutoni** â€“ 28352

# ðŸ“˜ **AUCA System Access Control â€“ Database Trigger Module**
AUCA)**.
The system enforces strict operational rules and logs violations for audit and security purposes.

---

## ðŸ“Œ **Project Overview**

AUCA requires that students and system users can only access academic systems:

* **Mondayâ€“Friday**
* **Between 08:00 AM and 05:00 PM**
* **No access allowed during Sabbath (Saturday & Sunday)**

This repository provides a **modular database solution** using:

* âœ” **One function** that encapsulates the business rules
* âœ” **Two triggers** (as required by the specification)

  * Trigger 1 â†’ **Blocks unauthorized operations**
  * Trigger 2 â†’ **Logs all violations for auditing**

This ensures **real-time enforcement** and **traceability** of all unauthorized access attempts.

---

## ðŸ›  **System Architecture**

### **1. Tables**

The system consists of three core tables:

| Table             | Purpose                                       |
| ----------------- | --------------------------------------------- |
| `student`         | Stores student identity (ID + name)           |
| `student_records` | Operational table students attempt to modify  |
| `access_log`      | Stores all blocked actions for audit tracking |

### **Student Table**
```sql
CREATE TABLE student (
    student_id INT PRIMARY KEY,
    student_name VARCHAR(100)
);
```

![student table](https://github.com/ntwari-cedric/pl-sql-group_assignment-group-B/blob/main/student%20table.png?raw=true)


### **Access Log Table**


```sql
CREATE TABLE access_log (
    log_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    student_id NUMBER,
    student_name VARCHAR2(100),
    attempted_action VARCHAR2(255),
    attempt_time DATE,
    message VARCHAR2(255)
);
```

![access table](https://github.com/ntwari-cedric/pl-sql-group_assignment-group-B/blob/main/table%20accces.png?raw=true)

## ðŸ”§ **Modular Access-Control Function**

Instead of embedding business rules inside triggers, we implement a **dedicated function**, improving maintainability and respecting good database design practices.

```sql
CREATE OR REPLACE FUNCTION fn_is_access_allowed
RETURN NUMBER
IS
    v_day  VARCHAR2(10);
    v_hour NUMBER;
BEGIN
    -- Get current day and hour
    v_day  := TO_CHAR(SYSDATE, 'DY', 'NLS_DATE_LANGUAGE=ENGLISH');
    v_hour := TO_NUMBER(TO_CHAR(SYSDATE, 'HH24'));

    -- Rule 1: Block weekends (Sat/Sun)
    IF v_day IN ('SAT', 'SUN') THEN
        RETURN 0;
    END IF;

    -- Rule 2: Block outside 8AMâ€“5PM
    IF v_hour < 8 OR v_hour >= 17 THEN
        RETURN 0;
    END IF;

    RETURN 1; -- Allowed
END;
```

